webpackJsonp([5],{"/SEU":function(t,e,i){var n=i("SlTn");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("b16fad1a",n,!0)},"5aCZ":function(t,e,i){"use strict";var n={name:"Tinymce",props:{id:{type:String,default:"tinymceEditor"},height:{type:Number,default:300},width:{type:Number,default:null},value:{type:String,default:""},data:function(){return{hasChange:!1,hasInit:!1}}},mounted:function(){var t=this,e=this;tinymce.init({selector:"#"+this.id,language:"zh_CN",height:this.height,width:this.width,menubar:!1,plugins:["advlist autolink lists link image imagetools charmap print preview anchor textcolor","searchreplace visualblocks code fullscreen textcolor colorpicker","insertdatetime media table contextmenu paste code help"],toolbar:["insert | undo redo | table styleselect | bold italic backcolor forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat code"],images_upload_url:"postAcceptor.php",init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp",function(){t.hasChange=!0,t.$emit("input",i.getContent({format:"raw"}))})},images_upload_handler:function(t,e,i){var n=new FormData;n.append("file",t.blob()),$.ajax({url:"https://ifarm.iqiys.cn/api/oss",type:"POST",processData:!1,contentType:!1,data:n,success:function(t){e(t.data)},error:function(t){i(222,t)}})}})},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return tinymce.get(e.id).setContent(t)})}},destroyed:function(){tinymce.get(this.id).destroy()}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container"},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.id}})])},staticRenderFns:[]};var s=i("VU/8")(n,a,!1,function(t){i("/SEU")},"data-v-77fc1b18",null);e.a=s.exports},SlTn:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.tinymce-container[data-v-77fc1b18] {\n  position: relative\n}\n.tinymce-textarea[data-v-77fc1b18] {\n  visibility: hidden;\n  z-index: -1;\n}\n\n",""])},"hP+R":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("gyMJ"),a={data:function(){return{form:{title:"",text:""},infoid:this.$route.params.infoid,flag:this.$route.params.flag}},components:{Tinymce:i("5aCZ").a},created:function(){-1==this.flag?this.fetchData():this.$route.meta.title="信息添加"},methods:{fetchData:function(){var t=this;Object(n.p)({page:0,size:1},this.infoid).then(function(e){t.form=e.data.content[0]})},handelErrorForm:function(){return""==this.form.title?(this.$message({message:"标题不能为空",type:"warning"}),!1):""!=this.form.summary||(this.$message({message:"概要不能为空",type:"warning"}),!1)},submitRes:function(){var t=this;this.handelErrorForm()?-1==this.flag?Object(n.j)({title:this.form.title,text:this.form.text,id:this.infoid}).then(function(e){200==e.status?(t.$message({message:"修改成功",type:"success"}),t.$router.push({name:"Info"})):t.$message({message:"修改失败",type:"warning"})}):Object(n.b)({title:this.form.title,text:this.form.text}).then(function(e){200==e.status?(t.$message({message:"添加成功",type:"success"}),t.$router.push({name:"Info"})):t.$message({message:"添加失败",type:"warning"})}):console.log("表单提交失败")}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"内容详情"}},[i("Tinymce",{ref:"editor",attrs:{height:550,width:800,id:"tinymce"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1),t._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitRes()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},r=i("VU/8")(a,s,!1,null,null,null);e.default=r.exports}});